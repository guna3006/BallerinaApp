<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="./favicon.ico"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="description" content="Web site created using create-react-app"/><link rel="apple-touch-icon" href="./logo192.png"/><link rel="manifest" href="./manifest.json"/><title>Ballerina Test Report</title><script id="testData" type="text/json">{"projectName":"BallerinaApp","totalTests":20,"passed":20,"failed":0,"skipped":0,"coveredLines":167,"missedLines":21,"coveragePercentage":88.83,"moduleStatus":[{"name":"BallerinaApp","totalTests":20,"passed":20,"failed":0,"skipped":0,"tests":[{"name":"databaseDelete","status":"PASSED"},{"name":"databaseDeleteNegative","status":"PASSED"},{"name":"databaseEmailStaffid","status":"PASSED"},{"name":"databaseEmailStaffidNegative","status":"PASSED"},{"name":"databaseGetEmailList","status":"PASSED"},{"name":"databaseGetEmailListNegative","status":"PASSED"},{"name":"databaseGetUserList","status":"PASSED"},{"name":"databaseGetUserListNegative","status":"PASSED"},{"name":"databaseNewdata","status":"PASSED"},{"name":"databaseNewdataNegative","status":"PASSED"},{"name":"findEmailTest","status":"PASSED"},{"name":"findEmailTestNegative","status":"PASSED"},{"name":"geolocationCoordinateTest","status":"PASSED"},{"name":"geolocationCoordinateTestNegative","status":"PASSED"},{"name":"geolocationWildcardSearchTest","status":"PASSED"},{"name":"geolocationWildcardSearchTestNegative","status":"PASSED"},{"name":"paginatedCoordinateTest","status":"PASSED"},{"name":"paginatedCoordinateTestNegative","status":"PASSED"},{"name":"paginatedWildcardSearchTest","status":"PASSED"},{"name":"paginatedWildcardSearchTestNegative","status":"PASSED"}]},{"name":"BallerinaApp.api","totalTests":0,"passed":0,"failed":0,"skipped":0,"tests":[]},{"name":"BallerinaApp.configurations","totalTests":0,"passed":0,"failed":0,"skipped":0,"tests":[]},{"name":"BallerinaApp.functions","totalTests":0,"passed":0,"failed":0,"skipped":0,"tests":[]}],"moduleCoverage":[{"name":"BallerinaApp","coveredLines":39,"missedLines":0,"coveragePercentage":100.0,"sourceFiles":[{"name":"main.bal","coveredLines":[5,11,12,13,19,20,21,24,25,33,34,35,42,43,44,46,48,54,55,56,57,59,65,66,67,71,72,73,74,78,79,80,84,85,86,91,92,93,94],"missedLines":[],"coveragePercentage":100.0,"sourceCode":"import ballerina/http;\nimport BallerinaApp.configurations;\nimport BallerinaApp.api;\n\nservice /geolocation on configurations:httpListener{\n    # Description.\n    #\n    # + lat - parameter description  \n    # + lon - parameter description\n    # + return - return value description\n    resource function get coordinate(string lat, string lon) returns map\u003cjson\u003e|error?{\n            return api:getCoordinate(lat,lon);\n        }\n\n    # Description.\n    #\n    # + key - parameter description\n    # + return - return value description\n    resource function get wildcardSearch(string key) returns map\u003cjson\u003e|error?{\n            return api:getAddressSeach(key);\n        }\n\n\n        }\nservice /paginated on configurations:httpListener{\n        # Description.\n        #\n        # + lat - parameter description  \n        # + lon - parameter description  \n        # + pageNumber - parameter description  \n        # + pageSize - parameter description\n        # + return - return value description\n        resource function get coordinate(string lat, string lon, int pageNumber, int pageSize) returns map\u003cjson\u003e|error?{\n            return api:joinCoordinate(lat,lon,pageNumber,pageSize);\n        }\n        # Description.\n        #\n        # + key - parameter description  \n        # + pageNumber - parameter description  \n        # + pageSize - parameter description\n        # + return - return value description\n        resource function get wildcardSearch(string key, int pageNumber, int pageSize) returns map\u003cjson\u003e|error?{\n            return api:joinGeoSearch(key,pageNumber,pageSize);\n        }\n\n}\n\nservice /find on configurations:httpListener{\n\n        # Description.\n        #\n        # + username - parameter description\n        # + return - return value description\n        resource function get email(string username) returns json[]|error{\n            return api:getReturnEmail(username);\n        }\n}\n\n service /database on configurations:httpListener{\n\n        # Description.\n        #\n        # + staffId - parameter description\n        # + return - return value description\n        resource function get email/[string staffId]() returns json[] | error{\n            return api:getReturnData(staffId);\n        }  \n\n        # Description.\n        # + return - return value description\n        resource function post newdata(http:Request req) returns map\u003canydata\u003e | error{\n            json payload \u003d check req.getJsonPayload();\n            return api:addData(payload);\n        }  \n\n        # Description.\n        # + return - return value description\n        resource function get emaillist() returns json[] | error{\n            return api:getEmailList();\n        }  \n\n        # Description.\n        # + return - return value description\n        resource function get usernamelist() returns json[] | error{\n            return api:getUserList();\n        }  \n        # Description.\n        #\n        # + staffid - parameter description\n        # + return - return value description\n        resource function delete email(string staffid) returns  json[]|error{\n            return api:deleteEmail(staffid);\n        }  \n }"}]},{"name":"BallerinaApp.api","coveredLines":61,"missedLines":11,"coveragePercentage":84.72,"sourceFiles":[{"name":"geoapi.bal","coveredLines":[0,4,5,6,11,14,15,16,21],"missedLines":[8,18],"coveragePercentage":81.82,"sourceCode":"import BallerinaApp.functions;\n\npublic function getCoordinate(string lat, string lon) returns map\u003cjson\u003e|error?{\n    map\u003cjson\u003e|error result \u003d check functions:geoapify -\u003e get(functions:coordinateSearch(lat,lon));\n        if (result is map\u003cjson\u003e){\n            return result;\n        }else{\n            return error(result.message());\n        }\n\n    }\n\npublic function getAddressSeach(string key) returns map\u003cjson\u003e|error?{\n    map\u003cjson\u003e|error result \u003d check functions:geoapify -\u003e get(functions:geoSearch(key));\n        if (result is map\u003cjson\u003e){\n            return result;\n        }else{\n            return error(result.message());\n        }\n\n    }"},{"name":"pagination.bal","coveredLines":[0,4,5,6,7,8,9,13,15,16,17,18,19,20,24],"missedLines":[11,22],"coveragePercentage":88.24,"sourceCode":"import BallerinaApp.functions;\n\npublic function joinCoordinate(string lat, string lon, int pageNumber, int pagesize) returns map\u003cjson\u003e|error {\n        string URL \u003d functions:coordinateSearch(lat,lon);\n        string addPrefix \u003d check functions:pagination(pageNumber,pagesize);\n        string finalURL \u003d URL+addPrefix;\n        map\u003cjson\u003e|error result \u003d functions:geoapify -\u003e get(finalURL);\n        if (result is map\u003cjson\u003e){\n            return result;\n        }else{\n            return error(result.message());\n        }\n}\npublic function joinGeoSearch(string key, int pageNumber, int pagesize) returns map\u003cjson\u003e|error {\n        string URL \u003d functions:geoSearch(key);\n        string addPrefix \u003d check functions:pagination(pageNumber,pagesize);\n        string finalURL \u003d URL+addPrefix;\n        map\u003cjson\u003e|error result \u003d functions:geoapify -\u003e get(finalURL);\n        if (result is map\u003cjson\u003e){\n            return result;\n        }else{\n            return error(result.message());\n        }\n}"},{"name":"emails.bal","coveredLines":[0,5,6,7,9,10,14,17,18,20,23,26,29,30,31,33,34,35,38,39,42,46,49,50,51,54,57,61,62,63,66,69,72,73,75,78,80],"missedLines":[12,21,36,40,52,64,76],"coveragePercentage":84.09,"sourceCode":"import ballerina/sql;\nimport BallerinaApp.functions;\n\npublic function getReturnEmail(string username) returns json[] | error {\n        string | error emailReturn \u003d functions:FindEmailAddress(username);\n        boolean | error emailMatch \u003d functions:emailStarts(check emailReturn,username);\n        string | error userName \u003d check functions:getEmailUsername(check emailReturn);\n\n        if (emailMatch \u003d\u003d true){\n            return functions:genarateJSON(check emailReturn,emailMatch,check userName);\n        }else{\n            return error(check emailReturn);\n        }\n    }\n\npublic function getReturnData(string staffId) returns json[] |error {\n        functions:dbReturnVar|error result \u003d check functions:GetDataItemById(staffId);\n        json[]|error resultJ \u003d [check result];\n\n        if (resultJ is error ){\n            return error(resultJ.message());\n        }else{\n            return resultJ;\n        }\n\n    }\n\npublic function addData(json payload) returns functions:dbReturnVar|error {\n        functions:dbRequestVar|error entryDataMap \u003d payload.cloneWithType(functions:dbRequestVar);\n        if (entryDataMap is error ){\n            return error(entryDataMap.message());\n           } else {\n            any|error address \u003d entryDataMap.get(\"address\");\n            any|error staffId \u003d entryDataMap.get(\"staff_id\");\n            if (address is error) \u0026\u0026 (staffId is error){\n                return error(address.message());\n            }else {\n               functions:dbReturnVar|error result \u003d functions:AddDataItem(entryDataMap.get(\"address\").toString(),entryDataMap.get(\"staff_id\").toString());\n                    if (result is error ){\n                        return error(result.message().toJsonString());\n                    }else{\n                        return result;\n                    }           \n            }\n        }\n    }\n\npublic function getEmailList() returns json[] | error {\n        string | error result \u003d functions:GetEmailList();\n        json [] | error emaiList \u003d [check result];\n        if (emaiList is error) {\n            return error(emaiList.message());\n        } else {\n            return emaiList;\n        }\n\n    }\n\n\npublic function getUserList() returns json[] | error {\n        string[] | error result \u003d functions:getAllUserList();\n        json[] | error emaiList \u003d result;\n        if (emaiList is error) {\n            return error(emaiList.message());\n        } else {\n            return emaiList;\n        }\n\n    }\n\npublic function deleteEmail(string staffId) returns json[]|error {\n        json|sql:Error? result \u003d check functions:DeleteRecord(staffId);\n        json[] resultJ\u003d [check result];\n\n        if (result is error){\n            return error(result.message());\n            }else{\n            return resultJ;\n        }\n    }"}]},{"name":"BallerinaApp.configurations","coveredLines":0,"missedLines":0,"coveragePercentage":0.0,"sourceFiles":[]},{"name":"BallerinaApp.functions","coveredLines":67,"missedLines":10,"coveragePercentage":87.01,"sourceFiles":[{"name":"function.bal","coveredLines":[4,5,6,9,10,11,12,13,14,15,16,20,21,24,26,27,31,34,35,36,37,38,39,44,47,48],"missedLines":[29,41],"coveragePercentage":92.86,"sourceCode":"import ballerina/lang.regexp;\n\npublic function emailStarts(string emailList, string username) returns boolean{\n    boolean result \u003d emailList.startsWith(username);\n    return result;\n}\n\npublic function getAllUserList() returns string[] | error{\n    string emailList \u003d check(GetEmailList());\n    string[] emails \u003d re `,`.split(emailList);\n    string[] usernames \u003d [];\n    foreach string email in emails {\n        if validEmailPattern.isFullMatch(email) {\n            regexp:Groups? emailGroups \u003d validEmailPattern.findGroups(email);\n            if emailGroups is regexp:Groups {\n                usernames.push((\u003cregexp:Span\u003eemailGroups[1]).substring());\n            }\n        }\n    }\n        return usernames;\n}\n\npublic function getEmailUsername(string emailAddress) returns string | error {\n    int? atIndex \u003d  emailAddress.indexOf(\"@\");\n    \n    if (atIndex \u003e 0) {\n        return emailAddress.substring(0, atIndex ?: 0);\n    } else {\n        return invalidString();\n    }\n}\n\npublic function pagination(int pageNumber, int pagesize) returns string | error {\n    int? offset \u003d (pageNumber - 1) * pagesize;\n    string offSet \u003d offset.toString();\n    string pageSize \u003d pagesize.toString();\n    string paginationPrefix \u003d \"\u0026offset\u003d\"+offSet+\"\u0026limit\u003d\"+pageSize;\n    if (offset is int){\n        return paginationPrefix;\n    }else{\n        return invalidInt();\n    }\n\n}\n\npublic function genarateJSON(string emailReturn, boolean emailMatch, string userName) returns json[] | error{\n    return [{\"email match\": emailMatch, \"email address\": emailReturn, \"email username\": userName}];\n}\n\n\n\n"},{"name":"errorMessage.bal","coveredLines":[],"missedLines":[5,6,9,10],"coveragePercentage":0.0,"sourceCode":"configurable string INVALID_INT_MSG \u003d ?;\nconfigurable string INVALID_STRING_MSG \u003d ?;\n\npublic function invalidInt() returns error{\n    return error(INVALID_INT_MSG);\n}\n\npublic function invalidString() returns error{\n    return error(INVALID_STRING_MSG);\n}\n"},{"name":"dbQueries.bal","coveredLines":[0,6,8,12,13,16,17,18,20,22,25,27,31,32,34,37,39,42,43,45,46,48,50,53,54,56,59,62,66,67,70,73,76],"missedLines":[23,35,57,71],"coveragePercentage":89.19,"sourceCode":"import ballerina/sql;\nimport BallerinaApp.configurations;\n\npublic function GetDataItemById(string staffId) returns dbReturnVar|error {\n\n    sql:ParameterizedQuery GetDataItemByIdQuery \u003d `SELECT * FROM emails WHERE staff_id \u003d ${staffId}`;\n    \n    stream\u003crecord { }, sql:Error?\u003e resultStream \u003d configurations:mysqlClient -\u003e query(GetDataItemByIdQuery);\n\n    record {|\n        record { } value;\n    |}|error? result \u003d resultStream.next();\n    if (result is record {|\n                      record { } value;\n                  |}) {\n        dbReturnVar addedItem \u003d {\n            address: \u003cstring\u003eresult.value[\"address\"],\n            staffId: \u003cstring\u003eresult.value[\"staff_id\"]\n        };\n        return addedItem;\n\n    } else if (result is error) {\n        return error(result.message());\n    } else {\n        return error(\"Retreive failed\");\n    }\n}\n\n\npublic function GetEmailList() returns string|error {\n    sql:ParameterizedQuery GetAllEmail \u003d `SELECT GROUP_CONCAT(address) as address FROM emails`;\n    string|sql:Error result \u003d configurations:mysqlClient -\u003e queryRow(GetAllEmail);\n\n    if (result is sql:Error) {\n        return error(result.message());\n    } else {\n        return result;\n    }\n}\n\npublic function FindEmailAddress(string username) returns string|sql:Error {\n    sql:ParameterizedQuery FindEmail \u003d `SELECT address FROM emails WHERE address LIKE CONCAT(${username}, \u0027%\u0027) `;\n    string|sql:Error result \u003d configurations:mysqlClient -\u003e queryRow(FindEmail);\n\n    if (result is sql:Error) {\n        return error(result.message());\n    } else {\n        return result;\n    }\n}\n\npublic function AddDataItem(string address, string staffId) returns dbReturnVar|error {\n    sql:ParameterizedQuery InsertNewDataItemQuery \u003d `INSERT INTO emails (address,staff_id) VALUES(${address},${staffId})`;\n    sql:ExecutionResult|sql:Error result \u003d configurations:mysqlClient -\u003e execute(InsertNewDataItemQuery);\n\n    if (result is sql:Error) {\n        return error(result.message());\n    } else {\n        return GetDataItemById(staffId);\n    }\n\n}\n\n\npublic function DeleteRecord(string staffId) returns json|error {\n    sql:ParameterizedQuery deleteStatement \u003d `DELETE FROM emails WHERE staff_id \u003d ${staffId};`;\n    sql:ExecutionResult|sql:Error result \u003d configurations:mysqlClient -\u003e execute(deleteStatement);\n\n\n    if (result is sql:Error) {\n        return error(result.message());\n    } else {\n        return  (\"Record \"+staffId+\" successfull deleted\").toJson();\n    }\n\n}"},{"name":"variables.bal","coveredLines":[4,9],"missedLines":[],"coveragePercentage":100.0,"sourceCode":"public type dbReturnVar record {|\n    string address;\n    string staffId;\n|};\n\npublic type dbRequestVar record {|\n    string address;\n    string staff_id;\n|};\n\npublic type MapAnyData map\u003canydata\u003e;\n\npublic string:RegExp validEmailPattern \u003d re `([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})`;"},{"name":"apiCalls.bal","coveredLines":[11,12,13,16,17,18],"missedLines":[],"coveragePercentage":100.0,"sourceCode":"import ballerina/http;\nconfigurable string GEO_API_URL \u003d ?;\nconfigurable string GEO_API_KEY \u003d ?;\nconfigurable string API_FORMAT \u003d ?;\nconfigurable string GEO_URI_REVERSE \u003d ?;\nconfigurable string GEO_URI_SEARCH \u003d ?;\n\n\npublic http:Client geoapify \u003d check new(string `${GEO_API_URL}`);\npublic function geoSearch(string key) returns string {\n    string finalURL \u003d string `${GEO_URI_SEARCH}`+\"text\u003d\"+key+\"\u0026format\u003d\"+string `${API_FORMAT}`+\"\u0026apiKey\u003d\"+ string `${GEO_API_KEY}`;\n    return finalURL;\n}\n\npublic function coordinateSearch(string lat, string lon) returns string {\n    string finalURL \u003d string `${GEO_URI_REVERSE}`+\"lat\u003d\"+lat+\"\u0026lon\u003d\"+lon+\"\u0026format\u003d\"+string `${API_FORMAT}`+\"\u0026apiKey\u003d\"+ string `${GEO_API_KEY}`;\n    return finalURL;\n}"}]}]}</script><link href="./static/css/2.00169df1.chunk.css" rel="stylesheet"><link href="./static/css/main.15691da7.chunk.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"></div><script>!function(e){function r(r){for(var n,l,a=r[0],i=r[1],p=r[2],c=0,s=[];c<a.length;c++)l=a[c],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&s.push(o[l][0]),o[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(f&&f(r);s.length;)s.shift()();return u.push.apply(u,p||[]),t()}function t(){for(var e,r=0;r<u.length;r++){for(var t=u[r],n=!0,a=1;a<t.length;a++){var i=t[a];0!==o[i]&&(n=!1)}n&&(u.splice(r--,1),e=l(l.s=t[0]))}return e}var n={},o={1:0},u=[];function l(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=n,l.d=function(e,r,t){l.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,r){if(1&r&&(e=l(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)l.d(t,n,function(r){return e[r]}.bind(null,n));return t},l.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(r,"a",r),r},l.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l.p="./";var a=this["webpackJsonp@ballerina/testerina-report"]=this["webpackJsonp@ballerina/testerina-report"]||[],i=a.push.bind(a);a.push=r,a=a.slice();for(var p=0;p<a.length;p++)r(a[p]);var f=i;t()}([])</script><script src="./static/js/2.7adafa74.chunk.js"></script><script src="./static/js/main.f28f3ccd.chunk.js"></script></body></html>